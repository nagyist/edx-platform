<%inherit file="base.html" />
<%def name="online_help_token()"><% return "outline" %></%def>
<%!
import json
import logging
from util.date_utils import get_default_time_display
from django.utils.translation import ugettext as _
from contentstore.utils import reverse_usage_url
%>
<%block name="title">${_("Course Outline")}</%block>
<%block name="bodyclass">is-signedin course view-outline</%block>

<%namespace name='static' file='static_content.html'/>

<%block name="jsextra">
<script type="text/javascript">
    require(["domReady!", "jquery", "js/views/pages/course_outline", "js/models/xblock_outline_info"],
            function(doc, $, CourseOutlinePage, XBlockOutlineInfo) {
                var courseXBlock = new XBlockOutlineInfo(${json.dumps(course_structure) | n}, { parse: true });
                var view = new CourseOutlinePage({
                    el: $('#content'),
                    model: courseXBlock,
                    initialState: ${json.dumps(initial_state) | n}
                });
                view.render();
            });
</script>
</%block>

<%block name="header_extras">
<link rel="stylesheet" type="text/css" href="${static.url('js/vendor/timepicker/jquery.timepicker.css')}" />
% for template_name in ['course-outline', 'xblock-string-field-editor', 'basic-modal', 'modal-button', 'edit-outline-item-modal']:
<script type="text/template" id="${template_name}-tpl">
    <%static:include path="js/${template_name}.underscore" />
</script>
% endfor
</%block>

<%block name="content">
<div class="wrapper-mast wrapper">
    <header class="mast has-actions has-subtitle">
        <h1 class="page-header">
            <small class="subtitle">${_("Content")}</small>
            <span class="sr">&gt; </span>${_("Course Outline")}
        </h1>

        <nav class="nav-actions">
            <h3 class="sr">${_("Page Actions")}</h3>
            <ul>
                <li class="nav-item">
                    <a href="#" class="button button-new" data-category="chapter" data-parent="${context_course.location}" data-default-name="${_('Section')}" title="${_('Click to add a new section')}">
                        <i class="icon-plus"></i>${_('New Section')}
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="button button-toggle button-toggle-expand-collapse collapse-all is-hidden">
                        <span class="collapse-all"><i class="icon-arrow-up"></i> <span class="label">${_("Collapse All Sections")}</span></span>
                        <span class="expand-all"><i class="icon-arrow-down"></i> <span class="label">${_("Expand All Sections")}</span></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="${lms_link}" rel="external" class="button view-button view-live-button"
                       title="${_('Click to open the courseware in the LMS in a new tab')}">${_("View Live")}</a>
                </li>
            </ul>
        </nav>
    </header>
</div>

<div class="wrapper-content wrapper">
    <section class="content">
        <article class="content-primary" role="main">
            <div class="wrapper-dnd">
                <%
                course_locator = context_course.location
                %>
                <article class="outline outline-full outline-course" data-locator="${course_locator}" data-course-key="${course_locator.course_key}">
                </article>
            </div>
            <div class="ui-loading">
                <p><span class="spin"><i class="icon-refresh"></i></span> <span class="copy">${_("Loading...")}</span></p>
            </div>
        </article>
        <aside class="content-supplementary" role="complimentary">
            <div class="bit">
                <h3 class="title-3">${_("What can I do on this page?")}</h3>
                <p>${_("You can create new sections and subsections, set the release date for sections, and create new units in existing subsections.  You can set the assignment type for subsections that are to be graded, and you can open a subsection for further editing.")}</p>

                <p>${_("In addition, you can drag and drop sections, subsections, and units to reorganize your course.")}</p>
            </div>
        </aside>
    </section>
</div>
</%block>

<!-- TODO: remove and refactor this into real modal UI -->
<%block name="placeholder_modal">
<!-- <div class="wrapper wrapper-modal-window wrapper-modal-window-bulkpublish-section" aria-describedby="modal-window-description" aria-labelledby="modal-window-title" aria-hidden="" role="dialog">
    <div class="modal-window-overlay"></div>
    <div style="top: 5%; left: 30%;" class="modal-window confirm modal-med modal-type-generic">
        <div class="bulkpublish-section-modal">
            <div class="modal-header">
                <h2 class="title modal-window-title">${_("Section Publishing")}</h2>
            </div>

            <div class="modal-content">
                <div class="message modal-introduction">
                    <p>${_("Publish all unpublished changes in this section")}</p>
                </div>

                <div class="modal-section bulkpublish-included">
                    <h3 class="modal-section-title">${_("The following will be published:")}</h3>
                    <div class="modal-section-content">
                        <div class="outline outline-skosh outline-bulkpublish">
                            <ol class="list-subsections is-sortable">
                                <li class="outline-item outline-subsection">
                                    <h4 class="subsection-title item-title">Subsection Title</h4>

                                    <div class="subsection-content">
                                        <ol class="list-units is-sortable">
                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>
                                        </ol>
                                    </div>
                                </li>

                                <li class="outline-item outline-subsection">
                                    <h4 class="subsection-title item-title">Subsection Title</h4>

                                    <div class="subsection-content">
                                        <ol class="list-units is-sortable">
                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>
                                        </ol>
                                    </div>
                                </li>

                                <li class="outline-item outline-subsection">
                                    <h4 class="subsection-title item-title">Subsection Title</h4>

                                    <div class="subsection-content">
                                        <ol class="list-units is-sortable">
                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished changes</p>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="outline-item outline-unit is-draggable">
                                                <h5 class="unit-title item-title">Unit Title</h5>
                                                <div class="unit-status">
                                                    <div class="status-message">
                                                      <p class="status-message-copy">Unpublished</p>
                                                    </div>
                                                </div>
                                            </li>
                                        </ol>
                                    </div>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <div class="modal-section bulkpublish-included">
                    <h3 class="modal-section-title">${_("12 items will not be published:")}</h3>
                    <div class="modal-section-content">

                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <h3 class="sr">Actions</h3>
                <ul>
                  <li class="action-item">
                    <a href="#" class="button action-primary action-publish">Publish</a>
                  </li>
                  <li class="action-item">
                    <a href="#" class="button  action-cancel">Cancel</a>
                  </li>
                </ul>
            </div>
        </div>
    </div>
</div> -->
</%block>
